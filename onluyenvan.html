<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>√îN LUY·ªÜN VƒÇN</title>

<style>
body {
    font-family: "Times New Roman", serif;
    background: #f4f6f8;
    padding: 20px;
}

h1 {
    text-align: center;
    color: #2c3e50;
}

/* TIMER */
.timer {
    text-align: center;
    font-size: 32px;
    font-weight: bold;
    margin: 10px 0;
    color: #2c3e50;
}

.timer.warning { color: orange; }
.timer.danger { color: red; }

.controls {
    text-align: center;
    margin-bottom: 20px;
}

button {
    font-size: 16px;
    padding: 8px 16px;
    margin: 0 5px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

.start { background: #27ae60; color: white; }
.pause { background: #f39c12; color: white; }
.reset { background: #c0392b; color: white; }

.section {
    background: #ffffff;
    max-width: 900px;
    margin: 20px auto;
    padding: 20px;
    border-radius: 10px;
}

textarea {
    width: 100%;
    height: 220px;
    font-size: 16px;
    line-height: 1.6;
    padding: 12px;
    resize: none;
}

.counter {
    margin-top: 10px;
    font-weight: bold;
}

.counter.limit {
    color: red;
}
</style>
</head>

<body>

<h1>√îN LUY·ªÜN VƒÇN</h1>

<div id="timer" class="timer">‚è±Ô∏è 90:00</div>

<div class="controls">
    <button class="start" onclick="startTimer()">‚ñ∂Ô∏è B·∫ÆT ƒê·∫¶U</button>
    <button class="pause" onclick="pauseTimer()">‚è∏Ô∏è T·∫†M D·ª™NG</button>
    <button class="reset" onclick="resetAll()">üîÅ RESET</button>
</div>

<div class="section">
    <h2>PH·∫¶N 1: Ngh·ªã lu·∫≠n x√£ h·ªôi (t·ªëi ƒëa 200 ch·ªØ)</h2>
    <textarea id="essay200"></textarea>
    <div id="count200" class="counter">S·ªë ch·ªØ: 0 / 200</div>
</div>

<div class="section">
    <h2>PH·∫¶N 2: Ngh·ªã lu·∫≠n vƒÉn h·ªçc (t·ªëi ƒëa 600 ch·ªØ)</h2>
    <textarea id="essay600"></textarea>
    <div id="count600" class="counter">S·ªë ch·ªØ: 0 / 600</div>
</div>

<script>
// ================= ƒê·∫æM CH·ªÆ =================
function limitTyping(textareaId, counterId, maxWords) {
    const textarea = document.getElementById(textareaId);
    const counter = document.getElementById(counterId);

    textarea.addEventListener("input", () => {
        let words = textarea.value
            .replace(/[.,]/g, "")
            .trim()
            .split(/\s+/)
            .filter(w => w !== "");

        if (words.length > maxWords) {
            textarea.value = words.slice(0, maxWords).join(" ");
            counter.classList.add("limit");
            counter.textContent = `S·ªë ch·ªØ: ${maxWords} / ${maxWords} ‚Äî ƒê√É ƒê·ª¶`;
        } else {
            counter.classList.remove("limit");
            counter.textContent =
                `S·ªë ch·ªØ: ${words.length} / ${maxWords} ‚Äî C√≤n l·∫°i: ${maxWords - words.length}`;
        }
    });
}

limitTyping("essay200", "count200", 200);
limitTyping("essay600", "count600", 600);

// ================= ƒê·∫æM GI·ªú 90 PH√öT =================
const TOTAL_TIME = 90 * 60;
let totalSeconds = TOTAL_TIME;
let timerInterval = null;
const timerEl = document.getElementById("timer");

function renderTimer() {
    let minutes = Math.floor(totalSeconds / 60);
    let seconds = totalSeconds % 60;

    timerEl.textContent =
        `‚è±Ô∏è ${minutes.toString().padStart(2, "0")}:${seconds.toString().padStart(2, "0")}`;

    timerEl.classList.remove("warning", "danger");

    if (totalSeconds <= 300 && totalSeconds > 60) {
        timerEl.classList.add("warning");
    }

    if (totalSeconds <= 60 && totalSeconds > 0) {
        timerEl.classList.add("danger");
    }

    if (totalSeconds <= 0) {
        clearInterval(timerInterval);
        timerInterval = null;
        timerEl.textContent = "‚õî H·∫æT GI·ªú";
        timerEl.classList.add("danger");
        document.getElementById("essay200").disabled = true;
        document.getElementById("essay600").disabled = true;
    }
}

function startTimer() {
    if (timerInterval === null && totalSeconds > 0) {
        timerInterval = setInterval(() => {
            totalSeconds--;
            renderTimer();
        }, 1000);
    }
}

function pauseTimer() {
    clearInterval(timerInterval);
    timerInterval = null;
}

// ================= RESET =================
function resetAll() {
    pauseTimer();

    totalSeconds = TOTAL_TIME;
    renderTimer();

    // M·ªü kh√≥a & x√≥a b√†i
    ["essay200", "essay600"].forEach(id => {
        const t = document.getElementById(id);
        t.value = "";
        t.disabled = false;
    });

    // Reset b·ªô ƒë·∫øm
    document.getElementById("count200").textContent = "S·ªë ch·ªØ: 0 / 200";
    document.getElementById("count600").textContent = "S·ªë ch·ªØ: 0 / 600";
    document.getElementById("count200").classList.remove("limit");
    document.getElementById("count600").classList.remove("limit");
}

// Hi·ªÉn th·ªã ban ƒë·∫ßu
renderTimer();
</script>

</body>
</html>
